{"version":3,"sources":["webpack:///./src/components/start.vue?fd51","webpack:///./src/components/start.vue","webpack:///./src/apis/start.js","webpack:///./src/components/start.vue?cb43"],"names":["class","nextPage","startTimeThree","showNoAreaTips","isOpenP","startWatch","title","showP","width","before-close","handleClose","footer","type","submitForm","model","ruleForm","rules","label-width","span","label","prop","style","xzlx","placeholder","changeProduct","options","item","key","value","nums","xzqy","changeProduct1","sbtxhList","camAreaNo","button1","data","axios","url","method","components","v_headerTitle","setup","bodyleft","startTimeOne","startTimetwo","num","router","SocketState","then","res","console","log","setTimeout","compare","sessionStorage","getItem","timer","setInterval","clearInterval","push","path","query","AreaId","alert","confirmButtonText","callback","go","required","message","trigger","render"],"mappings":"kHAAA,W,oFCmBI,eAA4B,OAAvBA,MAAM,YAAU,S,GAGhBA,MAAM,gC,GACJA,MAAM,kB,EACT,eAA8B,OAAzBA,MAAM,cAAY,S,GAQpBA,MAAM,gB,GACJA,MAAM,gB,GAwDLA,MAAM,iB,iBACwB,O,iBACc,O,iUA1FxD,eA8FM,OA7FJA,MAAK,gBAAC,+BAA8B,sBACJ,EAAAC,a,CAEhC,eAaM,OAZHD,MAAK,yCAA6B,EAAAE,iBAC7B,+B,CAEN,eAQM,OAPHF,MAAK,iB,qBAAsC,gB,sBAAmD,iBAIzF,gCACP,WAED,I,GAEF,EAEA,eAAiB,GACjB,eAeM,MAfN,EAeM,CAdJ,eAQM,MARN,EAQM,CAPJ,EACA,eAKM,OAJHA,MAAK,iCAAqB,EAAAG,gBACrB,sC,CAEN,eAAkC,QAA3B,QAAK,8BAAE,EAAAC,SAAA,EAAAA,QAAA,sBAAS,S,KAG3B,eAIM,MAJN,EAIM,CAHJ,eAEM,MAFN,EAEM,CADJ,eAAqD,OAA/C,QAAK,8BAAE,EAAAC,YAAA,EAAAA,WAAA,qBAAYL,MAAM,aAAY,cAKjD,eAuDY,GAtDVM,MAAM,O,WACG,EAAAC,M,qDAAA,EAAAA,MAAK,IACdC,MAAM,MACLC,eAAc,EAAAC,a,CA6CJC,OAAM,iBACf,iBAGO,CAHP,eAGO,OAHP,EAGO,CAFL,eAAiD,GAArC,QAAK,+BAAE,EAAAJ,OAAK,K,0BAAU,iBAAG,C,YACrC,eAA+D,GAApDK,KAAK,UAAW,QAAK,+BAAE,EAAAC,gB,0BAAc,iBAAG,C,2CA9CvD,iBAyCU,CAzCV,eAyCU,GAzCAC,MAAO,EAAAC,SAAWC,MAAO,EAAAA,MAAOC,cAAY,S,0BACpD,iBAmBS,CAnBT,eAmBS,Q,yBAlBP,iBAiBS,CAjBT,eAiBS,GAjBAC,KAAM,IAAE,C,yBACf,iBAee,CAff,eAee,GAfDC,MAAM,OAAOC,KAAK,Q,0BAC9B,iBAaY,CAbZ,eAaY,GAZVC,MAAA,e,WACS,EAAAN,SAASO,K,qDAAT,EAAAP,SAASO,KAAI,IACtBC,YAAY,QACX,SAAM,+BAAE,EAAAC,mB,0BAGP,iBAAuB,E,mBADzB,eAMY,2BALK,EAAAC,SAAO,SAAfC,G,wBADT,eAMY,GAJTC,IAAKD,EACLP,MAAOO,EACPE,MAAOF,G,4FAOA,GAAJ,EAAAG,M,iBAAd,eAmBS,W,yBAlBP,iBAiBS,CAjBT,eAiBS,GAjBAX,KAAM,IAAE,C,yBACf,iBAee,CAff,eAee,GAfDC,MAAM,OAAOC,KAAK,Q,0BAC9B,iBAaY,CAbZ,eAaY,GAZVC,MAAA,e,WACS,EAAAN,SAASe,K,qDAAT,EAAAf,SAASe,KAAI,IACtBP,YAAY,QACX,SAAM,+BAAE,EAAAQ,oB,0BAGP,iBAAyB,E,mBAD3B,eAMY,2BALK,EAAAC,WAAS,SAAjBN,G,wBADT,eAMY,GAJTC,IAAKD,EAAKO,UACVd,MAAOO,EAAKO,UACZL,MAAOF,EAAKO,W,+PC9ElBC,EAAU,SAACC,GACpB,OAAOC,eAAM,CACTC,IAAK,4BACLC,OAAQ,OACRH,UDqGO,GACbI,WAAY,CACVC,cAAA,QAEFC,MAJa,WAKX,IAAIC,EAAW,eAAI,IAGfC,EAAe,gBAAI,GACnBC,EAAe,gBAAI,GACnB1C,EAAiB,gBAAI,GACrBK,EAAQ,gBAAI,GACZsC,EAAM,eAAI,IAEV9B,EAAW,eAAI,CACjBe,KAAM,GACNR,KAAM,KAEJU,EAAY,eAAI,IAChBH,EAAO,gBAAI,GACXJ,EAAU,eAAI,CAAC,MAAO,QACtBtB,EAAiB,gBAAI,GACrB2C,EAAS,iBACT7C,EAAW,gBAAI,GACf8C,EAAc,eAAI,IACtB,gBAAU,WACR,EAAQ,IAAIC,MAAK,SAACC,GAChBC,QAAQC,IAAIF,EAAId,MAChBH,EAAUJ,MAAQqB,EAAId,QAExBQ,EAAaf,OAAQ,EACrBwB,YAAW,WACTT,EAAaf,OAAQ,EACrBgB,EAAahB,OAAQ,IACpB,MACHwB,YAAW,WACTlD,EAAe0B,OAAQ,IACtB,QAEL,IAAMJ,EAAgB,WACpB0B,QAAQC,IAAI,eAAMpC,EAASa,MAAMN,OACE,QAA/B,eAAMP,EAASa,MAAMN,MACvBO,EAAKD,OAAQ,GAEbC,EAAKD,OAAQ,EACbb,EAASa,MAAME,KAAO,KAGpBC,EAAiB,WACrBc,EAAIjB,MAAQb,EAASa,MAAME,MAEvB1B,EAAU,WAEdG,EAAMqB,OAAQ,GAEVf,EAAa,WAIjBN,EAAMqB,OAAQ,GAMVlB,EAAc,WAElBH,EAAMqB,OAAQ,GAEVyB,EAAU,WACdN,EAAYnB,MAAQ,iBACpBsB,QAAQC,IAAIJ,EAAYnB,QAEpBvB,EAAa,WAEjB,GAAI,eAAMU,EAASa,MAAMN,MAAO,CAC9B,eAAagC,eAAeC,QAAQ,iBACpCtD,EAAS2B,OAAQ,EACjB,IAAI4B,EAAQC,aAAY,WACG,GAArBV,EAAYnB,OACd8B,cAAcF,GACqB,QAA/B,eAAMzC,EAASa,MAAMN,MACvB8B,YAAW,WACTnD,EAAS2B,OAAQ,EACjBkB,EAAOa,KAAK,CACVC,KAAM,eAEP,KAEHR,YAAW,WACTnD,EAAS2B,OAAQ,EACjBkB,EAAOa,KAAK,CACVC,KAAM,WACNC,MAAO,CACLC,OAAQ/C,EAASa,MAAME,UAG1B,MAEyB,GAArBiB,EAAYnB,OACrB8B,cAAcF,GACd,OAAaO,MAAM,QAAS,gBAAiB,CAC3CC,kBAAmB,KACnBC,SAAU,WACRnB,EAAOoB,GAAG,OAIdb,WAGC,CACL,GAA4B,GAAxBlD,EAAeyB,MACjB,OAAO,EAEPzB,EAAeyB,OAAQ,EACvBwB,YAAW,WACTjD,EAAeyB,OAAQ,IACtB,QAIT,MAAO,CACLc,WACAC,eACAC,eACA1C,iBACAK,QACAQ,WACAiB,YACAH,OACAgB,MACApB,UACAT,MAAO,CACLc,KAAM,CAAC,CAAEqC,UAAU,EAAMC,QAAS,QAASC,QAAS,WACpD/C,KAAM,CAAC,CAAE6C,UAAU,EAAMC,QAAS,QAASC,QAAS,YAGtDlE,iBACA4C,cACAD,SACAtB,gBACAO,iBACA9B,WACAG,UACAS,aACAH,cACAL,aACAgD,a,UEzPN,EAAOiB,OAASA,EAED","file":"js/chunk-58871f09.e957b340.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./start.vue?vue&type=style&index=0&id=45da8a72&lang=scss\"","<template>\r\n  <div\r\n    class=\"body-basic animate__animated\"\r\n    :class=\"{ animate__backOutDown: nextPage }\"\r\n  >\r\n    <div\r\n      :class=\"[{ animate__bounceOutLeft: startTimeThree }]\"\r\n      class=\"body-bg animate__animated\"\r\n    >\r\n      <div\r\n        :class=\"[\r\n          { animate__bounceInUp: startTimeOne },\r\n          { animate__bounceOutUp: startTimetwo },\r\n        ]\"\r\n        class=\"dec-word animate__animated\"\r\n      >\r\n        易丰智能监控\r\n      </div>\r\n    </div>\r\n    <div class=\"color-bg\"></div>\r\n\r\n    <v_headerTitle />\r\n    <div class=\"content-bg animate__animated\">\r\n      <div class=\"content-header\">\r\n        <div class=\"header-dec\"></div>\r\n        <div\r\n          :class=\"{ animate__shakeX: showNoAreaTips }\"\r\n          class=\"header-setting animate__animated\"\r\n        >\r\n          <span @click=\"isOpenP\">选择区域</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"content-body\">\r\n        <div class=\"start-button\">\r\n          <div @click=\"startWatch\" class=\"button-bg\">开始监控</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 配置信息 -->\r\n    <el-dialog\r\n      title=\"选择区域\"\r\n      v-model=\"showP\"\r\n      width=\"50%\"\r\n      :before-close=\"handleClose\"\r\n    >\r\n      <el-form :model=\"ruleForm\" :rules=\"rules\" label-width=\"100px\">\r\n        <el-row>\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"选择类型\" prop=\"xzlx\">\r\n              <el-select\r\n                style=\"width: 100%\"\r\n                v-model=\"ruleForm.xzlx\"\r\n                placeholder=\"请选择类型\"\r\n                @change=\"changeProduct()\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in options\"\r\n                  :key=\"item\"\r\n                  :label=\"item\"\r\n                  :value=\"item\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row v-if=\"nums == true\">\r\n          <el-col :span=\"24\">\r\n            <el-form-item label=\"选择区域\" prop=\"xzqy\">\r\n              <el-select\r\n                style=\"width: 100%\"\r\n                v-model=\"ruleForm.xzqy\"\r\n                placeholder=\"请选择区域\"\r\n                @change=\"changeProduct1()\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in sbtxhList\"\r\n                  :key=\"item.camAreaNo\"\r\n                  :label=\"item.camAreaNo\"\r\n                  :value=\"item.camAreaNo\"\r\n                >\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button @click=\"showP = false\">取 消</el-button>\r\n          <el-button type=\"primary\" @click=\"submitForm()\">确 定</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, ref, toRaw } from \"vue\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { createSocket, getSocketState } from \"../utils/websocket\";\r\nimport { ElMessageBox } from \"element-plus\";\r\nimport v_headerTitle from \"../components/headTitle.vue\";\r\nimport { button1 } from \"../apis/start\";\r\n// import { ElMessage } from \"element-plus\";\r\nexport default {\r\n  components: {\r\n    v_headerTitle,\r\n  },\r\n  setup() {\r\n    let bodyleft = ref({\r\n      // url: require(\"../assets/image/new_bg.mp4\"),\r\n    });\r\n    let startTimeOne = ref(false);\r\n    let startTimetwo = ref(false);\r\n    let startTimeThree = ref(false);\r\n    let showP = ref(false); //配置是否展示\r\n    let num = ref(\"\");\r\n    // const ruleFormText = ref(null); //refs改变写法\r\n    let ruleForm = ref({\r\n      xzqy: \"\",\r\n      xzlx: \"\",\r\n    });\r\n    let sbtxhList = ref([]);\r\n    let nums = ref(false);\r\n    let options = ref([\"单区域\", \"多区域\"]);\r\n    let showNoAreaTips = ref(false); //未选择区域提示\r\n    let router = useRouter(); //路由\r\n    let nextPage = ref(false); //动画离开\r\n    let SocketState = ref(\"\");\r\n    onMounted(() => {\r\n      button1({}).then((res) => {\r\n        console.log(res.data);\r\n        sbtxhList.value = res.data;\r\n      });\r\n      startTimeOne.value = true;\r\n      setTimeout(() => {\r\n        startTimeOne.value = false;\r\n        startTimetwo.value = true;\r\n      }, 2500);\r\n      setTimeout(() => {\r\n        startTimeThree.value = true;\r\n      }, 3000);\r\n    });\r\n    const changeProduct = () => {\r\n      console.log(toRaw(ruleForm.value.xzlx));\r\n      if (toRaw(ruleForm.value.xzlx) === \"单区域\") {\r\n        nums.value = true;\r\n      } else {\r\n        nums.value = false;\r\n        ruleForm.value.xzqy = \"\";\r\n      }\r\n    };\r\n    const changeProduct1 = () => {\r\n      num.value = ruleForm.value.xzqy;\r\n    };\r\n    const isOpenP = () => {\r\n      //打开模态框\r\n      showP.value = true;\r\n    };\r\n    const submitForm = () => {\r\n      //表单验证\r\n      // ruleFormText.value.validate((valid) => {\r\n      //   if (valid) {\r\n      showP.value = false;\r\n      //   } else {\r\n      //     return false;\r\n      //   }\r\n      // });\r\n    };\r\n    const handleClose = () => {\r\n      //关闭模态框\r\n      showP.value = false;\r\n    };\r\n    const compare = () => {\r\n      SocketState.value = getSocketState();\r\n      console.log(SocketState.value);\r\n    };\r\n    const startWatch = () => {\r\n      //点击开始监控\r\n      if (toRaw(ruleForm.value.xzlx)) {\r\n        createSocket(sessionStorage.getItem(\"websocketurl\"));\r\n        nextPage.value = true;\r\n        let timer = setInterval(() => {\r\n          if (SocketState.value == 1) {\r\n            clearInterval(timer);\r\n            if (toRaw(ruleForm.value.xzlx) === \"多区域\") {\r\n              setTimeout(() => {\r\n                nextPage.value = false;\r\n                router.push({\r\n                  path: \"/details\",\r\n                });\r\n              }, 1000);\r\n            } else {\r\n              setTimeout(() => {\r\n                nextPage.value = false;\r\n                router.push({\r\n                  path: \"/details\",\r\n                  query: {\r\n                    AreaId: ruleForm.value.xzqy,\r\n                  },\r\n                });\r\n              }, 1000);\r\n            }\r\n          } else if (SocketState.value == 3) {\r\n            clearInterval(timer);\r\n            ElMessageBox.alert(\"请稍后再试\", \"websocket连接出错\", {\r\n              confirmButtonText: \"确定\",\r\n              callback: () => {\r\n                router.go(0);\r\n              },\r\n            });\r\n          } else {\r\n            compare();\r\n          }\r\n        });\r\n      } else {\r\n        if (showNoAreaTips.value == true) {\r\n          return false;\r\n        } else {\r\n          showNoAreaTips.value = true;\r\n          setTimeout(() => {\r\n            showNoAreaTips.value = false;\r\n          }, 1500);\r\n        }\r\n      }\r\n    };\r\n    return {\r\n      bodyleft, //左侧图片\r\n      startTimeOne, //动画时间\r\n      startTimetwo, //动画时间\r\n      startTimeThree, //动画时间\r\n      showP, //配置\r\n      ruleForm, //表单验证\r\n      sbtxhList, //上包台序号\r\n      nums,\r\n      num,\r\n      options, //选择区域类型\r\n      rules: {\r\n        xzqy: [{ required: true, message: \"请选择区域\", trigger: \"change\" }],\r\n        xzlx: [{ required: true, message: \"请选择类型\", trigger: \"change\" }],\r\n      }, //表单验证\r\n      // ruleFormText, //ref替换\r\n      showNoAreaTips, //未选择区域提示\r\n      SocketState, //通讯连接状态\r\n      router, //路由\r\n      changeProduct, //选择器\r\n      changeProduct1, //选择器\r\n      nextPage, //页面离开事件\r\n      isOpenP, //配置事件\r\n      submitForm, //表单事件\r\n      handleClose, //表单事件\r\n      startWatch, //开始监控事件\r\n      compare, //获取websocketstate..\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang='scss'>\r\n@import \"../assets/css/start.scss\";\r\n</style>","import { axios } from \"../utils/request\"\r\nexport const button1 = (data) => {\r\n    return axios({\r\n        url: 'monitorRecord/messageNums',\r\n        method: 'post',\r\n        data,\r\n    })\r\n}","import { render } from \"./start.vue?vue&type=template&id=45da8a72\"\nimport script from \"./start.vue?vue&type=script&lang=js\"\nexport * from \"./start.vue?vue&type=script&lang=js\"\n\nimport \"./start.vue?vue&type=style&index=0&id=45da8a72&lang=scss\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}